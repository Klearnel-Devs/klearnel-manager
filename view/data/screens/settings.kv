#:import Active controller

ManagerScreen:
    name: 'Settings'
    fullscreen: True
    BoxLayout:
        orientation: 'vertical'
        ActionBar:
            size_hint_y: None
            size: (root.width, root.height/20)
            ActionView:
                id: av
                ActionPrevious:
                    text: "Logout"
                    on_press:
                        app.logout()
                ActionSpinner:
                    id: spnr
                    important: True
                    text: 'Settings'
                    values: app.screen_names
                    on_text:
                        app.go_screen(args[1])
                ActionToggleButton:
                ActionButton:
                    text: 'Previous screen'
                    on_press:
                        app.go_screen('Quarantine')

                ActionButton:
                    text: 'Next screen'
                    on_press:
                        app.go_screen('Scanner')
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            size: self.size
            GridLayout:
                size_hint_y: None
                size: (400, 800)
                cols: 1
                rows: 5
                spacing: 30
                GridLayout:
                    cols:2
                    rows: 5
                    row_default_height: 30
                    Widget:
                        Label:
                            text: "Global Configuration Options"
                            size_hint: (None, None)
                            pos: self.parent.pos
                            height: self.parent.height
                            width: self.parent.width * 2
                    Label:
                    Label:
                        text: "Small Definition (in MB)"

                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: smaDef
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        value1: 'gbl'
                        value2: 'small'
                        text: app.getConf('gbl', 'small')
                    Label:
                        text: "Medium Definition (in MB)"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: medDef
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        value1: 'gbl'
                        value2: 'medium'
                        text: app.getConf('gbl', 'medium')
                    Label:
                        text: "Large Definition (in MB)"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: lrgDef
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        value1: 'gbl'
                        value2: 'large'
                        text: app.getConf('gbl', 'large')
                    Label:
                        text: "Maximum Log Age"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: logDef
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        value1: 'gbl'
                        value2: 'log_age'
                        text: app.getConf('gbl', 'log_age')
                GridLayout:
                    rows: 4
                    cols: 2
                    row_default_height: 30
                    Widget:
                        Label:
                            text: "Small Files & Folders"
                            size_hint: (None, None)
                            pos: self.parent.pos
                            height: self.parent.height
                            width: self.parent.width * 2
                    Label:
                    Label:
                        text: "Expiration Limit (in days)"
                        size_hint_x:None
                        width: self.parent.width/3

                    CfgTextInput:
                        id: expSma
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        value1: 'sma'
                        value2: 'exp_def'
                        text: app.getConf('sma', 'exp_def')
                    Label:
                        text: "Backup?"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgCheckBox:
                        id: buSma
                        active: app.getConf('sma', 'backup')
                        value1: 'sma'
                        value2: 'backup'
                    Label:
                        text: "Backup Location"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: locSma
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        text: app.getConf('sma', 'location')
                        value1: 'sma'
                        value2: 'location'
                GridLayout:
                    rows: 4
                    cols: 2
                    row_default_height: 30
                    Widget:
                        Label:
                            text: "Medium Files & Folders"
                            size_hint: (None, None)
                            pos: self.parent.pos
                            height: self.parent.height
                            width: self.parent.width * 2
                    Label:
                    Label:
                        text: "Expiration Limit (in days)"
                        size_hint_x:None
                        width: self.parent.width/3

                    CfgTextInput:
                        id: expMed
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        text: app.getConf('med', 'exp_def')
                        value1: 'med'
                        value2: 'exp_def'
                    Label:
                        text: "Backup?"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgCheckBox:
                        id: buMed
                        active: app.getConf('med', 'backup')
                        value1: 'med'
                        value2: 'backup'
                    Label:
                        text: "Backup Location"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: locMed
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        text: app.getConf('med', 'location')
                        value1: 'med'
                        value2: 'location'
                GridLayout:
                    rows: 4
                    cols: 2
                    row_default_height: 30
                    Widget:
                        Label:
                            text: "Large Files & Folders"
                            size_hint: (None, None)
                            pos: self.parent.pos
                            height: self.parent.height
                            width: self.parent.width * 2
                    Label:
                    Label:
                        text: "Expiration Limit (in days)"
                        size_hint_x:None
                        width: self.parent.width/3

                    CfgTextInput:
                        id: expLrg
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        text: app.getConf('lrg', 'exp_def')
                        value1: 'lrg'
                        value2: 'exp_def'
                    Label:
                        text: "Backup?"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgCheckBox:
                        id: buLrg
                        active: app.getConf('lrg', 'backup')
                        value1: 'lrg'
                        value2: 'backup'
                    Label:
                        text: "Backup Location"
                        size_hint_x:None
                        width: self.parent.width/3
                    CfgTextInput:
                        id: locLrg
                        write_tab: False
                        multiline: False
                        size_hint_x:None
                        width: self.parent.width*(2/3)
                        text: app.getConf('lrg', 'location')
                        value1: 'lrg'
                        value2: 'location'
                GridLayout:
                    rows: 1
                    cols: 4
                    row_default_height: 30
                    Label:
                    Button:
                        text: "Save"
                        on_press:
                            app.setConf(locLrg, locMed, locSma, buLrg, buMed, buSma, expLrg, expMed, expSma, smaDef, medDef, lrgDef, logDef)
                    Button:
                        text: "Reset"
                        on_press:
                            locLrg.text = app.getConf('lrg', 'location')
                            locMed.text = app.getConf('med', 'location')
                            locSma.text = app.getConf('sma', 'location')
                            buLrg.text = app.getConf('lrg', 'backup')
                            buMed.text = app.getConf('med', 'backup')
                            buSma.text = app.getConf('sma', 'backup')
                            expLrg.text = app.getConf('lrg', 'exp_def')
                            expMed.text = app.getConf('med', 'exp_def')
                            expSma.text = app.getConf('sma', 'exp_def')
                            smaDef.text = app.getConf('gbl', 'small')
                            medDef.text = app.getConf('gbl', 'medium')
                            lrgDef.text = app.getConf('gbl', 'large')
                            logDef.text = app.getConf('gbl', 'log_age')

                    Label: